yarp_idl_to_dir(INPUT_FILES "${CMAKE_CURRENT_SOURCE_DIR}/thrifts/chartsService.thrift"
                OUTPUT_DIR "${CMAKE_CURRENT_BINARY_DIR}/autogenerated"
                SOURCES_VAR THRIFT_SOURCES
                HEADERS_VAR THRIFT_HEADERS
                INCLUDE_DIRS_VAR THRIFT_INCLUDE_DIRS)

add_library(idyntree-plotter-service STATIC ${THRIFT_SOURCES} ${THRIFT_HEADERS})
target_include_directories(idyntree-plotter-service SYSTEM PUBLIC ${THRIFT_INCLUDE_DIRS})
target_link_libraries(idyntree-plotter-service YARP::YARP_init YARP::YARP_OS YARP::YARP_sig)

set(SOURCES src/main.cpp src/ChartsManager.cpp src/ChartsManagerWindow.cpp)
set(HEADERS include/ChartsManager.h include/ChartsManagerWindow.h)

add_executable(idyntree-plotter ${SOURCES} ${HEADERS})
target_include_directories(idyntree-plotter PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/include)
target_link_libraries(idyntree-plotter Qt5::Charts Qt5::Widgets idyntree-plotter-service)
